# Combined Cadillac Lyriq Market Analysis Dashboard

This is a comprehensive dashboard that combines the best features from both `index.html` and `nextindex.html`, with data loaded dynamically from a JSON file generated by the `extract_chart_data.py` script.

## Features

### üéØ **Combined Functionality**
- **Interactive Filtering**: Year and trim selection controls from `nextindex.html`
- **Geographic Analysis**: Location-based charts and insights from `index.html`
- **Real-time Data**: Loads data from JSON file generated by `extract_chart_data.py`
- **Responsive Design**: Mobile-first approach with tablet and desktop breakpoints

### üìä **Charts and Visualizations**
1. **Geographic Distribution Chart**: Bar chart showing vehicle counts by state with color-coded pricing
2. **Trim Distribution Chart**: Stacked bar chart showing trim level distribution across states
3. **Interactive Controls**: Year and trim filtering with AWD variant options

### üîß **Technical Architecture**

#### Data Flow
```
cargurus-com-2025-10-02-final.json
    ‚Üì (extract_chart_data.py)
chart_data.json
    ‚Üì (combined_dashboard.html)
Interactive Dashboard
```

#### Key Components
- **Data Extraction**: `extract_chart_data.py` processes raw JSON and generates structured data
- **JSON Data File**: `chart_data.json` contains all dashboard data in structured format
- **HTML Dashboard**: `combined_dashboard.html` loads and visualizes the data

## File Structure

```
/Users/opselite/lyriq-price/
‚îú‚îÄ‚îÄ cargurus-com-2025-10-02-final.json    # Raw vehicle data
‚îú‚îÄ‚îÄ extract_chart_data.py                 # Data processing script
‚îú‚îÄ‚îÄ chart_data.json                       # Generated structured data
‚îú‚îÄ‚îÄ combined_dashboard.html               # Combined dashboard
‚îú‚îÄ‚îÄ index.html                           # Original dashboard (location + trim charts)
‚îú‚îÄ‚îÄ nextindex.html                       # Original dashboard (interactive filtering)
‚îî‚îÄ‚îÄ README files...
```

## Usage

### 1. Generate Data
```bash
# Generate JSON data from CarGurus file
python extract_chart_data.py cargurus-com-2025-10-02-final.json chart_data.js

# This creates both:
# - chart_data.js (JavaScript format)
# - chart_data.json (JSON format for dashboard)
```

### 2. View Dashboard
```bash
# Start local server
python -m http.server 8000

# Open browser to:
# http://localhost:8000/combined_dashboard.html
```

### 3. Update Data
When new vehicle data is available:
1. Update `cargurus-com-2025-10-02-final.json`
2. Run `python extract_chart_data.py` to regenerate data
3. Refresh the dashboard

## Data Structure

### JSON File Format (`chart_data.json`)
```json
{
  "metadata": {
    "generated_at": "2025-10-02T12:42:05.749859",
    "source_file": "cargurus-com-2025-10-02-final.json",
    "total_records": 623,
    "states_count": 40,
    "unique_trims": 9,
    "states_in_trim_chart": 24
  },
  "locationData": {
    "CA": { "count": 82, "avgPrice": 53484, "trims": ["Sport 1", "Luxury 1", "Luxury 2"] },
    "TX": { "count": 62, "avgPrice": 44142, "trims": ["Luxury 3", "Luxury 1", "Sport 3"] }
  },
  "trimDistributionData": {
    "trims": ["Luxury", "Luxury 1", "Luxury 2", "Luxury 3", "Sport 1", "Sport 2", "Sport 3", "Tech", "V-Series"],
    "states": [
      { "state": "CA", "total": 82, "trims": [3, 24, 7, 4, 28, 7, 5, 4, 0] },
      { "state": "TX", "total": 62, "trims": [3, 11, 8, 16, 6, 4, 10, 4, 0] }
    ]
  },
  "trimColors": {
    "Luxury": "#4ECDC4",
    "Luxury 1": "#45B7D1",
    "Luxury 2": "#96CEB4",
    "Luxury 3": "#FFEAA7",
    "Sport 1": "#DDA0DD",
    "Sport 2": "#98D8C8",
    "Sport 3": "#F7DC6F",
    "Tech": "#BB8FCE",
    "V-Series": "#FF6B6B"
  },
  "summary": {
    "top_states": [
      {"state": "CA", "count": 82, "avgPrice": 53484},
      {"state": "TX", "count": 62, "avgPrice": 44142}
    ],
    "trim_distribution": [["Sport 1", 156], ["Luxury 1", 142]]
  }
}
```

## Dashboard Features

### üéõÔ∏è **Interactive Controls**
- **Year Selection**: Filter by 2024, 2025, 2026 model years
- **Trim Selection**: Multi-select dropdown with all available trims
- **AWD Toggle**: Include/exclude AWD variants
- **Quick Actions**: Select All/Clear All trim buttons

### üìà **Charts and Analysis**
- **Geographic Distribution**: Vehicle counts and average prices by state
- **Trim Distribution**: Stacked bar chart showing trim preferences by state
- **Color Coding**: Price-based color scaling (green = lower prices, red = higher prices)
- **Interactive Tooltips**: Detailed information on hover

### üì± **Responsive Design**
- **Mobile**: Optimized for phones with stacked layout
- **Tablet**: 2-column grid with adjusted chart sizes
- **Desktop**: Full 3-column grid with large charts

## Key Improvements

### ‚úÖ **Data Management**
- **Centralized Data**: All data comes from single JSON file
- **No Hardcoded Data**: Dashboard loads data dynamically
- **Easy Updates**: Change data by regenerating JSON file
- **Fallback Support**: Graceful degradation if JSON fails to load

### ‚úÖ **User Experience**
- **Interactive Filtering**: Real-time chart updates based on selections
- **Responsive Design**: Works on all device sizes
- **Visual Feedback**: Color-coded pricing and clear data presentation
- **Performance**: Efficient data loading and chart rendering

### ‚úÖ **Maintainability**
- **Separation of Concerns**: Data processing separate from visualization
- **Modular Code**: Clear function structure and organization
- **Error Handling**: Graceful fallbacks and error messages
- **Documentation**: Comprehensive comments and README files

## Technical Details

### Data Processing Pipeline
1. **Raw Data**: CarGurus JSON with 623 vehicle records
2. **Extraction**: Python script processes and aggregates data
3. **Structuring**: Data organized into location, trim, and metadata sections
4. **Loading**: JavaScript fetches and parses JSON data
5. **Visualization**: Chart.js renders interactive charts

### Browser Compatibility
- **Modern Browsers**: Chrome, Firefox, Safari, Edge
- **Mobile Browsers**: iOS Safari, Chrome Mobile
- **Features Used**: ES6 async/await, Fetch API, Chart.js 3.9.1

### Performance Considerations
- **Lazy Loading**: Data loaded asynchronously
- **Chart Optimization**: Responsive chart sizing and efficient rendering
- **Memory Management**: Proper chart cleanup and event handling

## Future Enhancements

### üîÆ **Potential Improvements**
- **Real-time Updates**: WebSocket connection for live data
- **Export Functionality**: PDF/Excel export of charts and data
- **Advanced Filtering**: Date ranges, price ranges, mileage filters
- **Comparison Tools**: Side-by-side state/trim comparisons
- **Data Export**: Download filtered data as CSV/JSON

### üõ†Ô∏è **Technical Upgrades**
- **Caching**: Local storage for faster subsequent loads
- **Progressive Web App**: Offline functionality and app-like experience
- **API Integration**: Direct connection to CarGurus API
- **Advanced Analytics**: Machine learning insights and predictions

## Troubleshooting

### Common Issues
1. **JSON Not Loading**: Check file path and server running
2. **Charts Not Rendering**: Verify Chart.js CDN connection
3. **Mobile Display Issues**: Clear browser cache and test responsive design
4. **Data Not Updating**: Regenerate JSON file with latest data

### Debug Mode
Open browser console to see:
- Data loading status
- Chart initialization
- Error messages
- Performance metrics

## Support

For issues or questions:
1. Check console for error messages
2. Verify JSON file structure
3. Test with fallback data
4. Review browser compatibility

The dashboard is designed to be robust and user-friendly, with comprehensive error handling and responsive design for all devices.
